{{ define "main" }}

{{/* This template is for list of all publications in a Term (for example a Tag or Category) */}}
<div class="articles">
    {{/* Check if this is a category or tag taxonomy */}}
    {{ if eq .Data.Singular "category" }}
    {{/* Category display - plain text style */}}
    <div class="category-header">
        <span class="category-label">Category:</span>
        <a href="{{ .Permalink }}">{{ .Title }}</a>
    </div>
    {{ else }}
    {{/* Tag display - pill style */}}
    <div class="term-header">
        <span class="term-label">{{ i18n "publications_tagged_label" | default "Publications tagged" }}</span>
        <span class="post-tags-header">
            <ul class="post-tags">
                <li><a href="{{ .Permalink }}">{{ .Title | lower }}</a></li>
            </ul>
        </span>
    </div>
    {{ end }}

    {{/* Render term content if any */}}
    {{ with .Content }}
        <div class="section-content">
            {{ . }}
        </div>
    {{ end }}

    {{/* Render posts list like mini-toc */}}
    <div class="toc" role="navigation">
        <ul class="texts">
            {{ range .Paginator.Pages }}
                <li class="text-title">
                    {{ partial "post-toc-summary" . }}
                </li>
            {{ end }}
        </ul>
        {{ partial "pagination.html" . }}
    </div>
</div>

{{ end }}
